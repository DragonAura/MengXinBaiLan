# <center>2022软件设计大赛 萌新摆烂队</center>

## 队伍信息

队伍名称：萌新摆烂队

队长：李羿璇（无12）

队员：陈阳（无12）

# 功能文档

## 计划实现的目标

总体目标是制作一个类似于轨迹系列（希望达到的效果参考视频：[轨迹视频参考](https://www.bilibili.com/video/BV1VZ4y197Q6)）的小游戏。出于工期考虑，实际制作过程中会对其进行各种简化。总体来讲，制作本软件一方面是因为队长李羿璇是轨迹系列多年粉丝（×），另一方面也是因为这类重战略、重数值搭配的回合制游戏在如今即时制游戏为主流的游戏里事实上是被很多人忽略的，希望能借此向大家介绍这样一个有意思的游戏分类。

### 具体来说简化掉的功能？

* 出于技术力和游戏体量的考虑，放弃了菜单系统，预计绝大部分信息都将会被显示在右侧。
* 原本轨迹有CP和EP两套系统，此处为了相对简化，只制作了一套系统。
* 原本游戏中复杂的饰品和装备系统将被放弃，获取装备后数据直接改变，同时也无需再进行更换，所有获得的装备都自动被装备。

总之，就是一切比较复杂的系统都进行了简化，在很多系统上更接近于最早期JRPG的雏形。

## 已经实现的功能

* 正常工作的完备图形界面

* 简单的地图内移动，地图物品交互（虽然只做了一个）
* 玩家信息的基本显示
* 一套能正常工作的，基本完备运行的战斗系统
* 经验系统

## 尚未实现的功能

* 地图间移动暂时没有制作，但是接口已经写好了一部分
* 战斗系统暂时只有普通攻击，技能还没有进行制作，同时技能的学习和遗忘系统也同样没有制作。这样导致战斗系统过于枯燥，不具备趣味性。当然接口基本上都预留了，后续会补充
* 攻击距离限制还没有做
* 贴图质量过低，UI美工质量也极差，有待改进
* 现在所有画面都没有动画效果，画面极其僵硬，之后会制作动画效果
* 剧情还没有写，缺乏JRPG灵魂（×）

# 代码文档

## 使用的技术

* 使用的编程语言：C++
* 过程中用到的库：Qt（用作图形库）
* 其他：用了一部分stl，当然用得十分克制，只用了vector和iterator

## 代码的构建方式

### 基础信息

* 使用的操作系统：Windows10/11（经过测试两边都是能正常编译的）

* 使用的构建工具版本：Visual Studio 2022（最新的Community版应该都可以）
* 使用的Qt版本：Qt6.2.3

### 构建步骤

* 在Qt官网下载在线安装器，使用清华大学edu邮箱进行注册，获取免费的Qt
* 安装QtVSTools，从而获取Qt对VS的支持
* 改变正确的Qt安装路径
* 从github上下载对应的代码和项目文件，就可以构建好项目了

## 代码杂叙

### 代码结构

项目中主要有9个类，分别是BaiLan, MyGraphicsScene（共同放在了BaiLan.h内，是程序的主要部分），Battle.h（用于处理战斗相关），DEFINE.h（用于define常量），Explore.h（是自由探索的部分），GameStart.h（用于制作开始界面），Skills.h（用于保存技能），Story.h（用于提供输出剧情的图形界面），Unit.h（主要负责怪物和玩家等Unit），同时这些不同的头文件都被include入total.h。

### 代码特点

整体代码对Qt有大量使用。从图形界面到各种计时器，都利用了大量的Qt库。

对初稿的码量初步估计可能在1500行左右。

# 软件文档

## 进入游戏

首先选择开始游戏后进入输入名字的界面，任意输入自己的用户名即可。

![BaiLan_TSGVsRdjj6](https://raw.githubusercontent.com/DragonAura/MengXinBaiLan/readme-pic/BaiLan_TSGVsRdjj6.png)

![BaiLan_iCtSX3yBVi](https://raw.githubusercontent.com/DragonAura/MengXinBaiLan/readme-pic/BaiLan_iCtSX3yBVi.png)

## 界面简介

![BaiLan_8WPy2APx7W](https://raw.githubusercontent.com/DragonAura/MengXinBaiLan/readme-pic/BaiLan_8WPy2APx7W.png)

如图所示，整个游戏界面分为四部分，图形渲染界面用于渲染画面，信息输出界面用于输出各种文字信息，行动选择界面用于选择即将采取的行动，信息显示界面用于显示现在玩家的状态。

## 原野探索

原野探索中，虽然行动选择界面显示，但是一般不会能够使用；信息显示界面显示的就是当前的状态。主要可交互的只有图形渲染界面：

图中有边缘的墙和中间的草地，墙在现版本中暂时不可越过；而草地则可以随意走动。

![BaiLan_rRtIP5sbZc](https://raw.githubusercontent.com/DragonAura/MengXinBaiLan/readme-pic/BaiLan_rRtIP5sbZc.png)

图中圈出部分是可交互要素。

①为玩家所操控的角色，可以使用WASD或者上下左右方向键操作；

②为一张原野地图中的初始位置，同时也是回复点。当玩家以非满生命值的状态来到此处时，会回复满所有的血量，同时地图上的怪物会全部重新刷新；

③为怪物，当玩家接触到怪物的时候就会发生战斗，从而进入之后的战斗部分。

尽情探索吧！

## 战斗机制

测试版的游戏采取最古老的回合制机制（之后可能会考虑加入速度机制），即每一个单位轮流采取行动。

![BaiLan_qebYIsfwg5](https://raw.githubusercontent.com/DragonAura/MengXinBaiLan/readme-pic/BaiLan_qebYIsfwg5.png)

如图所示，在战斗时，整体操作逻辑为选择要释放的技能-选择释放的对象-confirm释放技能。按照这个逻辑，就可以发动攻击。如果有恢复技能的话，也许甚至能给自己进行回复？

在你没有选择技能时，你可以选择移动你的位置。测试版中没有攻击距离限制，所以移动位置暂时没有什么意义。

## 数值机制

游戏中，打倒怪物会获得一定的经验值，经验值达到一定程度后，便会自动升级；升级后不仅血量会恢复至满，同时血量上限、攻击力都会有所提升。当有怪物难以战胜时，刷等级也许是个不错的选择？

但是要注意，如果你战败了，你就会**失去所有的经验值**，并且在**重置点复活**，同时**所有怪物也都会重新刷新**。

有些怪物长相虽然和其他怪物一样，但是数据上会更加强大。面对这样的敌人，怎么胜利是一个好问题。

感谢游玩测试版本！
